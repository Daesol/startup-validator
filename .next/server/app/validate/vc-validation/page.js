(()=>{var e={};e.id=163,e.ids=[163],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6475:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return o},findSourceMapURL:function(){return a.findSourceMapURL}});let r=s(11264),a=s(11448),o=s(19357).createServerReference},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23703:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(37413),a=s(34647);function o(){return(0,r.jsx)(a.default,{})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34647:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tammyartawong/Documents/Foundr Club/startup-validator/src/features/validation/pages/vc-validation-page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tammyartawong/Documents/Foundr Club/startup-validator/src/features/validation/pages/vc-validation-page.tsx","default")},34729:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var r=s(60687),a=s(43210),o=s(4780);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));i.displayName="Textarea"},37830:e=>{"use strict";e.exports=require("node:stream/web")},41862:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42915:(e,t,s)=>{Promise.resolve().then(s.bind(s,34647))},44493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>u});var r=s(60687),a=s(43210),o=s(4780);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,o.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},54300:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(60687),a=s(43210),o=s(14163),i=a.forwardRef((e,t)=>(0,r.jsx)(o.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=s(24224),l=s(4780);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i,{ref:s,className:(0,l.cn)(c(),e),...t}));d.displayName=i.displayName},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56987:(e,t,s)=>{Promise.resolve().then(s.bind(s,81808))},57075:e=>{"use strict";e.exports=require("node:stream")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},81808:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var r=s(60687),a=s(16189),o=s(28947),i=s(41894),n=s(97042),l=s(43210),c=s(44493),d=s(29523),u=s(34729),m=s(54300),p=s(89667),g=s(41862),f=s(20140),h=s(6475);let v=(0,h.createServerReference)("404d2b0c08c7071d19f9f21954296181a94149a970",h.callServer,void 0,h.findSourceMapURL,"submitVCValidationForm");function b(){let e=(0,a.useRouter)(),[t,s]=(0,l.useState)(!1),[o,i]=(0,l.useState)({businessIdea:"",websiteUrl:"",additionalNotes:""}),[n,h]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),_=(e,t)=>{let s={...o,[e]:t};i(s),h(""!==s.businessIdea.trim())},w=async e=>{if(e.preventDefault(),y(!0),o.businessIdea.trim()&&!t){s(!0);try{await v({businessIdea:o.businessIdea,websiteUrl:o.websiteUrl,additionalContext:{additionalNotes:o.additionalNotes}})}catch(e){e instanceof Error&&e.message.includes("NEXT_REDIRECT")||(console.error("Error submitting form:",e),(0,f.o)({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"}),s(!1))}}};return t?(0,r.jsx)(c.Zp,{className:"p-4 sm:p-6 w-full max-w-full",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 py-8",children:[(0,r.jsx)(g.A,{className:"h-12 w-12 text-primary animate-spin"}),(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Submitting Form"}),(0,r.jsx)("p",{className:"text-center text-muted-foreground",children:"Redirecting to analysis page..."})]})}):(0,r.jsx)(c.Zp,{className:"p-4 sm:p-6 w-full max-w-full",children:(0,r.jsx)("form",{onSubmit:w,className:"w-full",children:(0,r.jsxs)("div",{className:"space-y-6 w-full",children:[(0,r.jsxs)("div",{className:"space-y-2 w-full",children:[(0,r.jsxs)(m.J,{htmlFor:"businessIdea",className:"flex items-center text-base font-medium",children:["Describe your business idea in detail",(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Our multi-agent AI system will analyze your idea from multiple specialized perspectives and provide a comprehensive VC-style assessment."}),(0,r.jsx)(u.T,{id:"businessIdea",placeholder:"What problem are you solving and how? Who is your target audience? What is your solution? Provide as much detail as possible for a better assessment.",value:o.businessIdea,onChange:e=>_("businessIdea",e.target.value),rows:8,required:!0,className:"w-full resize-y min-h-[200px]",style:{borderColor:b&&!o.businessIdea.trim()?"rgb(252, 165, 165)":void 0},disabled:t}),b&&!o.businessIdea.trim()&&(0,r.jsx)("p",{className:"text-xs text-red-500",children:"Business idea is required"})]}),(0,r.jsxs)("div",{className:"space-y-2 w-full",children:[(0,r.jsx)(m.J,{htmlFor:"websiteUrl",className:"text-base font-medium",children:"Website URL (Optional)"}),(0,r.jsx)(p.p,{id:"websiteUrl",type:"url",placeholder:"https://example.com",value:o.websiteUrl,onChange:e=>_("websiteUrl",e.target.value),className:"w-full",disabled:t}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"If you have a website or landing page, our AI can incorporate it into its analysis."})]}),(0,r.jsxs)("div",{className:"space-y-2 w-full",children:[(0,r.jsx)(m.J,{htmlFor:"additionalNotes",className:"text-base font-medium",children:"Additional Context (Optional)"}),(0,r.jsx)(u.T,{id:"additionalNotes",placeholder:"Any other information that might help us understand your business better? Market research, competitors, unique advantages, etc.",value:o.additionalNotes,onChange:e=>_("additionalNotes",e.target.value),rows:4,className:"w-full resize-y",disabled:t}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Share any additional context that might help our agents provide better insights."})]}),(0,r.jsxs)("div",{className:"space-y-4 w-full",children:[(0,r.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4 text-amber-800",children:[(0,r.jsx)("h3",{className:"font-medium mb-1",children:"About VC Validation"}),(0,r.jsx)("p",{className:"text-sm",children:"This process uses specialized AI agents to analyze different aspects of your business idea - from problem definition to market analysis, competitive positioning, business model, and legal considerations. Each agent will improve your idea and provide a score. The lead agent will then synthesize these insights into a final VC-style report."})]}),(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>e.push("/validate"),disabled:t,children:"Back"}),(0,r.jsx)(d.$,{type:"submit",disabled:t||b&&!n,children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Initiating Analysis..."]}):"Submit for VC Validation"})]})]})]})})})}function y(){let e=(0,a.useRouter)();return(0,r.jsxs)(n.M,{children:[(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>e.push("/"),children:[(0,r.jsx)(o.A,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("span",{className:"text-xl font-bold",children:"Startup Validator"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(i.U,{})})]})}),(0,r.jsx)("main",{className:"flex-1 container py-10 px-4",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto w-full",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tighter mb-2",children:"VC-Style Multi-Agent Validation"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Get a comprehensive VC-style analysis from our specialized AI agents"})]}),(0,r.jsx)(b,{})]})})]})}},89667:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(60687),a=s(43210),o=s(4780);let i=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));i.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},93176:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(65239),a=s(48088),o=s(88170),i=s.n(o),n=s(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c={children:["",{children:["validate",{children:["vc-validation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23703)),"/Users/tammyartawong/Documents/Foundr Club/startup-validator/src/app/validate/vc-validation/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/tammyartawong/Documents/Foundr Club/startup-validator/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,54413)),"/Users/tammyartawong/Documents/Foundr Club/startup-validator/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/tammyartawong/Documents/Foundr Club/startup-validator/src/app/validate/vc-validation/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/validate/vc-validation/page",pathname:"/validate/vc-validation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94735:e=>{"use strict";e.exports=require("events")},95538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"404d2b0c08c7071d19f9f21954296181a94149a970":()=>S});var r=s(91199);s(42087);var a=s(7944),o=s(90141),i=s(37350);let n=(0,s(91842).UU)("https://dynksioggkqwgivykuvh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5bmtzaW9nZ2txd2dpdnlrdXZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzMDUzMDEsImV4cCI6MjA1OTg4MTMwMX0.vMMZu55NMuzra_iq3JLraanzUlWrzwXRyMQ40TeJtJ0");async function l(e,t){try{console.log(`Creating VC validation for form ID: ${e}`);let{data:s,error:r}=await n.from("vc_validation_analyses").select("id").eq("validation_form_id",e).maybeSingle();if(r&&"PGRST116"!==r.code)throw console.error("Error checking for existing validation:",r),Error(`Database error: ${r.message}`);if(s)return console.log(`Existing VC validation found with ID: ${s.id}`),{success:!0,validationId:s.id};let{data:a,error:o}=await n.from("vc_validation_analyses").insert({validation_form_id:e,status:"pending",agent_responses:{},vc_report:{overall_score:0,business_type:"Unspecified",weighted_scores:{},category_scores:{},recommendation:"",strengths:[],weaknesses:[],suggested_actions:[],idea_improvements:{original_idea:t,improved_idea:"",problem_statement:"",market_positioning:"",uvp:"",business_model:""},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}).select("id").single();if(o)return console.error("Error creating VC validation:",o),{success:!1,error:`Failed to create VC validation: ${o.message}`};return console.log(`New VC validation created with ID: ${a.id}`),{success:!0,validationId:a.id}}catch(e){return console.error("Error in createVCValidation:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function c(e,t){try{console.log(`Updating VC validation status to "${t}" for ID: ${e}`);let{error:s}=await n.from("vc_validation_analyses").update({status:t,updated_at:new Date().toISOString()}).eq("id",e);if(s)return console.error("Error updating VC validation status:",s),{success:!1,error:s.message};return{success:!0}}catch(e){return console.error("Error in updateVCValidationStatus:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function d(e,t,s,r,a,o,i){try{console.log(`Adding ${t} agent analysis for validation ID: ${e}`);let{data:l,error:c}=await n.from("vc_agent_analyses").insert({vc_validation_id:e,agent_type:t,input_context:s,analysis:r,score:a,reasoning:o,enhanced_context:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();if(c)return console.error(`Error adding ${t} agent analysis:`,c),{success:!1,error:c.message};let{data:d,error:u}=await n.from("vc_validation_analyses").select("agent_responses").eq("id",e).single();u&&console.error("Error fetching current agent_responses:",u);let m=d?.agent_responses||{};m[t]=r;let{error:p}=await n.from("vc_validation_analyses").update({agent_responses:m,updated_at:new Date().toISOString()}).eq("id",e);return p&&console.error(`Error updating agent_responses with ${t} analysis:`,p),console.log(`Added ${t} agent analysis with ID: ${l.id}`),{success:!0,analysisId:l.id}}catch(e){return console.error("Error in addAgentAnalysis:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function u(e,t,s){try{let r;console.log(`Setting final VC report for validation ID: ${e}`),r="string"==typeof s?Math.round(parseFloat(s)):Math.round(s),console.log(`Parsed overall score: ${r} (original: ${s})`);let{error:a}=await n.from("vc_validation_analyses").update({vc_report:t,score:r,status:"completed",updated_at:new Date().toISOString()}).eq("id",e);if(a)return console.error("Error setting VC report:",a),{success:!1,error:a.message};return{success:!0}}catch(e){return console.error("Error in setVCReport:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}let m=new(s(52035)).Ay({apiKey:process.env.OPENAI_API_KEY,timeout:6e4,maxRetries:3});async function p(e,t=2){let s;for(let r=0;r<=t;r++)try{if(r>0){console.log(`Retrying OpenAI API call, attempt ${r}/${t}`);let e=Math.min(1e3*2**r+1e3*Math.random(),1e4);await new Promise(t=>setTimeout(t,e))}return await e()}catch(e){if(s=e,console.error(`OpenAI API error (attempt ${r}/${t}):`,e instanceof Error?e.message:"Unknown error"),r===t)throw e}throw s}async function g(e,t={},s){try{console.log("Starting VC validation for business idea:",e.substring(0,100));let r=e.trim();if(r.length<10)return{success:!1,error:"Business idea is too short for meaningful analysis",failed_at:"input_validation",error_details:{business_idea_length:r.length}};let a={user_input:r,...t},o={problem:null,market:null,competitive:null,uvp:null,business_model:null,validation:null,legal:null,metrics:null,vc_lead:null,market_fit:null,competition:null,team:null,financials:null,traction:null,investor_readiness:null},i=[],n=[];try{console.log("Starting Problem Agent analysis");let e=await f(a);o.problem=e,a={...a,problem_analysis:e,enhanced_problem_statement:e.improved_problem_statement},console.log("Problem analysis completed, score:",e.score),i.push("problem"),s&&await s("problem",e)}catch(t){let e=`Problem Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("problem"),a.enhanced_problem_statement=r}try{console.log("Starting Market Agent analysis");let e=await h(a);o.market=e,a={...a,market_analysis:e},console.log("Market analysis completed, score:",e.score),i.push("market"),s&&await s("market",e)}catch(t){let e=`Market Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("market")}try{console.log("Starting Competitive Agent analysis");let e=await v(a);o.competitive=e,a={...a,competitive_analysis:e,strengthened_differentiation:e.differentiation},console.log("Competitive analysis completed, score:",e.score),i.push("competitive"),s&&await s("competitive",e)}catch(t){let e=`Competitive Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("competitive")}try{console.log("Starting UVP Agent analysis");let e=await b(a);o.uvp=e,a={...a,uvp_analysis:e,refined_uvp:e.one_liner},console.log("UVP analysis completed, score:",e.score),i.push("uvp"),s&&await s("uvp",e)}catch(t){let e=`UVP Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("uvp")}try{console.log("Starting Business Model Agent analysis");let e=await y(a);o.business_model=e,a={...a,business_model_analysis:e,revenue_model:e.revenue_model},console.log("Business model analysis completed, score:",e.score),i.push("business_model"),s&&await s("business_model",e)}catch(t){let e=`Business Model Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("business_model")}try{console.log("Starting Validation Agent analysis");let e=await _(a);o.validation=e,a={...a,validation_analysis:e,validation_suggestions:e.validation_suggestions},console.log("Validation analysis completed, score:",e.score),i.push("validation"),s&&await s("validation",e)}catch(t){let e=`Validation Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("validation")}try{console.log("Starting Legal Agent analysis");let e=await w(a);o.legal=e,a={...a,legal_analysis:e,risk_tags:e.risk_tags},console.log("Legal analysis completed, score:",e.score),i.push("legal"),s&&await s("legal",e)}catch(t){let e=`Legal Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("legal")}try{console.log("Starting Metrics Agent analysis");let e=await x(a);o.metrics=e,a={...a,metrics_analysis:e},console.log("Metrics analysis completed, score:",e.score),i.push("metrics"),s&&await s("metrics",e)}catch(t){let e=`Metrics Agent failed: ${t instanceof Error?t.message:"Unknown error"}`;console.error(e),n.push("metrics")}let l=i.length/8;if(console.log(`Agent completion rate: ${(100*l).toFixed(1)}% (${i.length}/8 agents completed)`),0===i.length)return{success:!1,agent_analyses:o,error:"All validation agents failed to complete analysis",failed_at:"all_agents",error_details:{failed_agents:n,business_idea_length:r.length}};try{console.log("Starting VC Lead synthesis"),n.length>0&&console.log(`Proceeding with VC Lead synthesis with ${i.length}/8 completed agents.`);let e=await k(a,o);return n.length>0&&(e.partial_completion=!0,e.completed_agents=i,e.failed_agents=n),o.vc_lead={report:e,reasoning:n.length>0?`Synthesis of ${i.length}/8 completed agent analyses`:"Final synthesis of all agent analyses"},console.log("VC Lead synthesis completed, overall score:",e.overall_score),{success:!0,vc_report:e,agent_analyses:o,partial_completion:n.length>0,warning:n.length>0?"Used fallback report generation due to synthesis failure":void 0}}catch(t){let e=`VC Lead synthesis failed: ${t instanceof Error?t.message:"Unknown error"}`;if(console.error(e),i.length>0)try{console.log("Generating fallback report from completed agent analyses");let e=0,t=0;Object.entries(o).forEach(([s,r])=>{r&&"number"==typeof r.score&&(e+=r.score,t++)});let s=t>0?Math.round(e/t):60,a=[],l=[],c=[];o.problem&&o.problem.strengths&&a.push(...(o.problem.strengths||[]).slice(0,2)),o.market&&o.market.strengths&&a.push(...(o.market.strengths||[]).slice(0,2)),o.problem&&o.problem.weaknesses&&l.push(...(o.problem.weaknesses||[]).slice(0,2)),o.market&&o.market.weaknesses&&l.push(...(o.market.weaknesses||[]).slice(0,2));let d={overall_score:s,business_type:"Startup",weighted_scores:{},category_scores:{},idea_improvements:{original_idea:r,improved_idea:o.problem?.improved_problem_statement||r,problem_statement:"See original idea",market_positioning:"",uvp:o.uvp?.one_liner||"",business_model:o.business_model?.revenue_model||""},strengths:a.length>0?a:["Business idea provided for analysis"],weaknesses:l.length>0?l:["Complete analysis could not be performed"],suggested_actions:c.length>0?c:["Try again with a more detailed business description"],recommendation:`Based on the ${i.length} completed analyses, this idea has potential but requires refinement.`,partial_completion:!0,completed_agents:i,failed_agents:[...n,"vc_lead"],generation_method:"fallback",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return{success:!0,vc_report:d,agent_analyses:o,partial_completion:!0,warning:"Used fallback report generation due to synthesis failure"}}catch(e){console.error("Fallback report generation failed:",e)}return{success:!1,agent_analyses:o,error:"Failed to synthesize VC report",failed_at:"vc_lead_synthesis",error_details:{agent:"vc_lead",message:e,completed_agents:i,failed_agents:n}}}}catch(t){return console.error("Error in VC validation process:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error in VC validation process",failed_at:"general_process",error_details:{stack:t instanceof Error?t.stack:void 0,business_idea_length:e.length}}}}async function f(e){let t=`
# Problem Specialist Agent - "The Diagnostician"

## Your Task
As the Problem Specialist Agent, your task is to extract, clarify, and strengthen the actual societal or functional problem from the business idea. You need to:

1. Extract the core problem being addressed
2. Clarify and rephrase it to be more precise
3. Identify root causes, scale, and urgency
4. Assess if this is a real, significant pain point

## Business Idea
${e.user_input}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "improved_problem_statement": "A clear, concise statement of the problem",
  "severity_index": 8, // A number from 1-10 indicating problem severity
  "problem_framing": "global", // Either "global" or "niche"
  "root_causes": [
    "Root cause 1",
    "Root cause 2"
  ],
  "score": 7, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Focus on strengthening the problem definition. If the original idea is vague about the problem, create a clearer and more compelling problem statement. Be critical but constructive.
`,s=e.user_input||"";console.log(`Problem agent analyzing business idea (length: ${s.length}): "${s.substring(0,50)}..."`);try{let e=(await p(()=>m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Problem Specialist Agent (The Diagnostician). Your role is to extract, clarify and strengthen the actual problem statement from the business idea."},{role:"user",content:t}],temperature:.5,response_format:{type:"json_object"}}))).choices[0].message.content;if(!e)throw Error("No response from Problem Agent");try{let t=JSON.parse(e);return t.improved_problem_statement||(t.improved_problem_statement=s.substring(0,200)),t.severity_index&&"number"==typeof t.severity_index||(t.severity_index=5),t.problem_framing||(t.problem_framing="niche"),t.root_causes&&Array.isArray(t.root_causes)||(t.root_causes=["Unable to determine root causes"]),t.score&&"number"==typeof t.score||(t.score=70),t.reasoning||(t.reasoning="Analysis completed with default values"),t}catch(s){let t=s instanceof Error?s.message:"Unknown parsing error";throw console.error("Problem Agent returned invalid JSON:",t),console.error("Response content:",e.substring(0,500)),Error(`Problem Agent returned invalid JSON: ${t}`)}}catch(e){return console.error("Problem Agent analysis failed after retries:",e instanceof Error?e.message:String(e)),{improved_problem_statement:s.substring(0,500),severity_index:5,problem_framing:"niche",root_causes:["Unable to determine due to processing issues"],score:60,reasoning:"Auto-generated due to API processing issues"}}}async function h(e){let t=`
# Market Specialist Agent - "The Opportunity Validator"

## Your Task
As the Market Specialist Agent, your task is to validate the market opportunity for this business idea. You need to:

1. Estimate TAM/SAM/SOM
2. Assess real-world market demand
3. Determine growth rate and trends
4. Explain "why now" is the right time for this idea

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "tam": 5000000000, // Total Addressable Market in USD
  "sam": 1500000000, // Serviceable Addressable Market in USD
  "som": 300000000, // Serviceable Obtainable Market in USD
  "growth_rate": "15-20% annually",
  "market_demand": "Description of real-world demand and need",
  "why_now": "Explanation of why this is the right time for this solution",
  "score": 7, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Be realistic with your market size estimates, but don't be afraid to recognize a truly large opportunity when it exists.
`;e.user_input,console.log(`Market agent analyzing business context (enhanced problem: ${e.enhanced_problem_statement?.substring(0,50)||"None"}...)`);try{let e=(await p(()=>m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Market Specialist Agent (The Opportunity Validator). Your role is to analyze market size, growth potential, and validate the market opportunity."},{role:"user",content:t}],temperature:.5,response_format:{type:"json_object"}}))).choices[0].message.content;if(!e)throw Error("No response from Market Agent");try{let t=JSON.parse(e);return("number"!=typeof t.tam||isNaN(t.tam))&&(t.tam=1e9),("number"!=typeof t.sam||isNaN(t.sam))&&(t.sam=.3*t.tam),("number"!=typeof t.som||isNaN(t.som))&&(t.som=.1*t.sam),t.growth_rate||(t.growth_rate="10-15% annually"),t.market_demand||(t.market_demand="Moderate demand with growing interest"),t.why_now||(t.why_now="Current market conditions are favorable for this solution"),t.score&&"number"==typeof t.score||(t.score=70),t.reasoning||(t.reasoning="Market analysis completed with default values"),t}catch(s){let t=s instanceof Error?s.message:"Unknown parsing error";throw console.error("Market Agent returned invalid JSON:",t),console.error("Response content:",e.substring(0,500)),Error(`Market Agent returned invalid JSON: ${t}`)}}catch(e){return console.error("Market Agent analysis failed after retries:",e instanceof Error?e.message:String(e)),{tam:1e9,sam:3e8,som:3e7,growth_rate:"10-15% annually",market_demand:"Unable to determine due to processing issues",why_now:"Current market conditions",score:60,reasoning:"Auto-generated due to API processing issues"}}}async function v(e){let t=`
# Competitive Specialist Agent - "The Moat Evaluator"

## Your Task
As the Competitive Specialist Agent, your task is to evaluate the competitive landscape and moat potential for this business idea. You need to:

1. Identify existing competitors or solutions
2. Highlight gaps in existing solutions
3. Strengthen the idea's differentiation angle
4. Assess the defensibility of the business

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Market Analysis
${e.market_analysis?`
- TAM: $${Math.round(e.market_analysis.tam/1e6)}M
- Growth Rate: ${e.market_analysis.growth_rate}
`:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "competitors": [
    {
      "name": "Competitor 1",
      "description": "Brief description",
      "strengths": ["Strength 1", "Strength 2"],
      "weaknesses": ["Weakness 1", "Weakness 2"]
    }
  ],
  "differentiation": "Clear statement of how this idea differentiates from competitors",
  "moat_classification": "defensible", // Must be one of: "none", "weak", "defensible"
  "score": 7, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

If you can't identify specific competitors, suggest similar or adjacent solutions. Be realistic about the defensibility of the business.
`,s=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Competitive Specialist Agent (The Moat Evaluator). Your role is to identify competitors and evaluate the competitive advantage or moat of the business idea."},{role:"user",content:t}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!s)throw Error("No response from Competitive Agent");return JSON.parse(s)}async function b(e){let t=`
# UVP Specialist Agent - "The Message Refiner"

## Your Task
As the UVP Specialist Agent, your task is to craft and refine a clear, compelling unique value proposition. You need to:

1. Create a strong one-line UVP
2. Highlight emotional and strategic appeal
3. Show the before/after user outcome
4. Rate the stickiness and clarity of the value proposition

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Competitive Analysis
${e.competitive_analysis?`
Differentiation: ${e.competitive_analysis.differentiation}
Moat Classification: ${e.competitive_analysis.moat_classification}
`:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "one_liner": "Clear, compelling one-line UVP",
  "emotional_appeal": "Description of emotional resonance with users",
  "strategic_appeal": "Description of strategic value to users or businesses",
  "before_after": {
    "before": "User situation before using the product",
    "after": "User situation after using the product"
  },
  "stickiness_score": 8, // How memorable the value prop is (1-10)
  "differentiation_clarity": 7, // How clearly differentiated (1-10)
  "score": 7, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Focus on making the UVP clear, memorable, and differentiating. If the original idea is vague, take liberty to strengthen the value proposition significantly.
`,s=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the UVP Specialist Agent (The Message Refiner). Your role is to craft a clear, compelling unique value proposition for the business idea."},{role:"user",content:t}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!s)throw Error("No response from UVP Agent");return JSON.parse(s)}async function y(e){let t=`
# Business Model Specialist Agent - "The Monetization Analyst"

## Your Task
As the Business Model Specialist Agent, your task is to analyze and improve the revenue model. You need to:

1. Determine if the model can generate sustainable revenue
2. Suggest or refine pricing strategy
3. Create pricing tiers if applicable
4. Assess monetization viability

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Unique Value Proposition
${e.uvp_analysis?e.uvp_analysis.one_liner:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "revenue_model": "Description of how the business will make money",
  "pricing_tiers": [
    {
      "name": "Free",
      "price": "$0",
      "features": ["Feature 1", "Feature 2"]
    },
    {
      "name": "Pro",
      "price": "$29/mo",
      "features": ["All Free features", "Premium Feature 1"]
    }
  ],
  "sustainability_factors": [
    "Factor that contributes to long-term revenue"
  ],
  "monetization_viability": 8, // 1-10 score on revenue potential
  "score": 7, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Be practical and realistic about monetization. If the original idea lacks a clear revenue model, suggest appropriate models for the type of business.
`,s=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Business Model Specialist Agent (The Monetization Analyst). Your role is to analyze and improve the revenue model and business sustainability."},{role:"user",content:t}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!s)throw Error("No response from Business Model Agent");return JSON.parse(s)}async function _(e){let t=`
# Validation Specialist Agent - "The Signal Seeker"

## Your Task
As the Validation Specialist Agent, your task is to assess current validation and suggest future validation strategies. You need to:

1. Evaluate any existing validation efforts
2. Recommend how to validate further
3. Assess signal quality
4. Suggest potential customer quotes or validation metrics

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Business Model
${e.business_model_analysis?`
Revenue Model: ${e.business_model_analysis.revenue_model}
`:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "current_validation": {
    "waitlist": false,
    "surveys": false,
    "interviews": false
  },
  "validation_suggestions": [
    "Suggestion for how to validate the idea"
  ],
  "signal_quality": "weak", // Must be one of: "none", "weak", "moderate", "strong"
  "user_quotes": [
    "Hypothetical quote that would indicate strong validation"
  ],
  "score": 5, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Be honest about the current validation status, and realistic about what would constitute good validation for this specific idea.
`,s=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Validation Specialist Agent (The Signal Seeker). Your role is to assess current validation efforts and recommend further validation strategies."},{role:"user",content:t}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!s)throw Error("No response from Validation Agent");return JSON.parse(s)}async function w(e){let t=`
# Legal Specialist Agent - "The Compliance Evaluator"

## Your Task
As the Legal Specialist Agent, your task is to identify legal and regulatory concerns. You need to:

1. Identify legal or regulatory friction points
2. Flag ethical concerns
3. Highlight operational liabilities
4. Suggest required disclaimers or compliance measures

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Business Model
${e.business_model_analysis?`
Revenue Model: ${e.business_model_analysis.revenue_model}
`:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "friction_points": [
    "Legal or regulatory issue the business might face"
  ],
  "ethical_concerns": [
    "Potential ethical issue to consider"
  ],
  "operational_liabilities": [
    "Operational risk from a legal perspective"
  ],
  "required_disclaimers": [
    "Legal disclaimer or notice that would be required"
  ],
  "risk_tags": [
    "GDPR", "Privacy", "Intellectual Property"
  ],
  "risk_score": 6, // 1-10 score on legal risk (10 is highest risk)
  "compliance_readiness": "needs_work", // Must be one of: "not_ready", "needs_work", "ready"
  "score": 6, // Your overall score from 1-10 (10 is GOOD from a legal perspective)
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Be thorough in identifying potential legal issues, but don't invent problems that aren't relevant to this specific business.
`,s=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Legal Specialist Agent (The Compliance Evaluator). Your role is to identify legal, ethical, and regulatory risks in the business idea."},{role:"user",content:t}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!s)throw Error("No response from Legal Agent");return JSON.parse(s)}async function x(e){let t=`
# Metrics Specialist Agent - "The Quantifier"

## Your Task
As the Metrics Specialist Agent, your task is to provide key strategic metrics. You need to:

1. Estimate important business metrics
2. Calculate ROI and success probability
3. Forecast scalability and growth metrics
4. Provide MVP cost estimate

## Business Idea
${e.user_input}

## Enhanced Problem Statement
${e.problem_analysis?e.problem_analysis.improved_problem_statement:"Not available"}

## Market Analysis
${e.market_analysis?`
- TAM: $${Math.round(e.market_analysis.tam/1e6)}M
- SAM: $${Math.round(e.market_analysis.sam/1e6)}M
- SOM: $${Math.round(e.market_analysis.som/1e6)}M
`:"Not available"}

## Business Model
${e.business_model_analysis?`
Revenue Model: ${e.business_model_analysis.revenue_model}
`:"Not available"}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "roi": "3.2x in Year 1",
  "scalability_index": 85, // 1-100 score on scalability
  "mvp_budget_estimate": "$75,000 - $120,000",
  "ltv": "$4,500", // Lifetime Value
  "cac": "$1,200", // Customer Acquisition Cost
  "success_rate": "65-75%", // Overall success probability
  "breakeven_point": "14-18 months",
  "score": 7, // Your overall score from 1-10
  "reasoning": "Explanation of your thought process and score"
}
\`\`\`

Be realistic with your estimates, providing ranges when appropriate. Base your calculations on the market, business model, and competitive information available.
`,s=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the Strategic Metrics Specialist Agent (The Quantifier). Your role is to provide key strategic metrics and forecasts for the business idea."},{role:"user",content:t}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!s)throw Error("No response from Metrics Agent");return JSON.parse(s)}async function k(e,t){let s=function(e,t){let{businessType:s,weights:r}=function(e,t){let s={problem:.15,market:.15,competitive:.15,uvp:.15,business_model:.15,validation:.1,legal:.05,metrics:.1,vc_lead:0},r="General",a={...s},o=(e.user_input||"").toLowerCase(),i=t.problem||{},n=t.business_model||{},l=t.legal||{};return"global"===i.problem_framing||o.includes("social impact")||o.includes("donation")||o.includes("non-profit")||o.includes("charity")?(r="Social Impact",a={...s,problem:.25,legal:.15,business_model:.2,market:.1,competitive:.1,uvp:.1,validation:.05,metrics:.05,vc_lead:0}):o.includes("saas")||o.includes("software")||o.includes("b2b")||o.includes("enterprise")||(n.revenue_model||"").toLowerCase().includes("subscription")?(r="B2B SaaS",a={...s,uvp:.2,market:.2,business_model:.2,problem:.15,competitive:.1,validation:.05,legal:.05,metrics:.05,vc_lead:0}):o.includes("consumer")||o.includes("app")||o.includes("mobile")?(r="Consumer App",a={...s,uvp:.25,validation:.2,problem:.15,market:.15,competitive:.1,business_model:.1,legal:.025,metrics:.025,vc_lead:0}):o.includes("health")||o.includes("medical")||o.includes("patient")||(l.risk_tags||[]).some(e=>e.toLowerCase().includes("health")||e.toLowerCase().includes("medical")||e.toLowerCase().includes("hipaa"))?(r="Healthcare",a={...s,legal:.25,market:.2,validation:.15,problem:.15,business_model:.1,uvp:.05,competitive:.05,metrics:.05,vc_lead:0}):(o.includes("marketplace")||o.includes("platform")||o.includes("connect")||(n.revenue_model||"").toLowerCase().includes("transaction fee")||(n.revenue_model||"").toLowerCase().includes("commission"))&&(r="Marketplace",a={...s,competitive:.2,business_model:.2,market:.15,uvp:.15,problem:.1,validation:.1,legal:.05,metrics:.05,vc_lead:0}),{businessType:r,weights:a}}(e,t);return`
# VC Lead Agent - Final Synthesis

## Your Task
As the VC Lead Agent, your task is to synthesize all specialist analyses into a comprehensive VC-style report. You need to:

1. Determine dynamic weighting based on the nature of the idea (already done for you)
2. Generate an overall score
3. Provide a VC-style recommendation
4. Identify strengths and weaknesses
5. Suggest next steps for the founder

## Business Idea
${e.user_input}

## Specialist Agent Analyses

### Problem Analysis
Score: ${t.problem?.score||"N/A"}/10
${t.problem?.improved_problem_statement||"Not available"}

### Market Analysis
Score: ${t.market?.score||"N/A"}/10
TAM: $${(t.market?.tam||0)/1e6}M
SAM: $${(t.market?.sam||0)/1e6}M
SOM: $${(t.market?.som||0)/1e6}M

### Competitive Analysis
Score: ${t.competitive?.score||"N/A"}/10
Moat: ${t.competitive?.moat_classification||"Not available"}

### UVP Analysis
Score: ${t.uvp?.score||"N/A"}/10
UVP: ${t.uvp?.one_liner||"Not available"}

### Business Model Analysis
Score: ${t.business_model?.score||"N/A"}/10
Revenue Model: ${t.business_model?.revenue_model||"Not available"}

### Validation Analysis
Score: ${t.validation?.score||"N/A"}/10
Signal Quality: ${t.validation?.signal_quality||"Not available"}

### Legal Analysis
Score: ${t.legal?.score||"N/A"}/10
Risk Level: ${t.legal?.risk_score||"N/A"}/10 (higher is more risky)

### Metrics Analysis
Score: ${t.metrics?.score||"N/A"}/10
ROI: ${t.metrics?.roi||"Not available"}
MVP Cost: ${t.metrics?.mvp_budget_estimate||"Not available"}

## Dynamic Weighting
Based on the business idea type (${s}), the following weights are applied:
${Object.entries(r).filter(([e])=>"vc_lead"!==e).map(([e,t])=>`- ${e}: ${100*t}%`).join("\n")}

## Required Output Format
You must return your analysis in the following JSON format:

\`\`\`json
{
  "overall_score": 72, // 0-100 score based on weighted average
  "business_type": "${s}",
  "weighted_scores": {
    "problem": 7.5,
    "market": 6.0,
    "competitive": 5.0,
    "uvp": 8.0,
    "business_model": 7.0,
    "validation": 4.0,
    "legal": 7.0,
    "metrics": 6.0
  },
  "category_scores": {
    "problem": 7,
    "market": 6,
    "competitive": 5,
    "uvp": 8,
    "business_model": 7,
    "validation": 4,
    "legal": 7,
    "metrics": 6
  },
  "idea_improvements": {
    "original_idea": "Brief summary of original idea",
    "improved_idea": "Stronger, more refined version of the idea",
    "problem_statement": "Improved problem statement",
    "market_positioning": "Improved market position",
    "uvp": "Improved value proposition",
    "business_model": "Improved business model"
  },
  "recommendation": "VC-style recommendation (fund, pass, or needs work)",
  "strengths": [
    "Key strength of the idea"
  ],
  "weaknesses": [
    "Key weakness of the idea"
  ],
  "suggested_actions": [
    "Action the founder should take next"
  ],
  "created_at": "${new Date().toISOString()}",
  "updated_at": "${new Date().toISOString()}"
}
\`\`\`

Make your assessment realistic and constructive. Apply the proper weighting to calculate the overall score.
`}(e,t),r=(await m.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the VC Lead Agent, responsible for synthesizing all specialist analyses into a comprehensive VC-style report with dynamic weighting based on the nature of the idea."},{role:"user",content:s}],temperature:.5,response_format:{type:"json_object"}})).choices[0].message.content;if(!r)throw Error("No response from VC Lead Agent");return JSON.parse(r)}async function S(e){try{console.log("Processing VC validation submission",e);let t=await (0,i.nn)({businessIdea:e.businessIdea,websiteUrl:e.websiteUrl,...e.additionalContext},"vc_validation");if(!t.success||!t.formId)return{success:!1,message:t.error||"Failed to save validation form"};let s=t.formId;console.log("Validation form saved with ID:",s);let r=await l(s,e.businessIdea);if(!r.success||!r.validationId)return{success:!1,message:r.error||"Failed to create VC validation record"};let n=r.validationId;return console.log("VC validation created with ID:",n),await c(n,"in_progress"),Promise.resolve().then(()=>{console.log("Starting async VC validation process for ID:",n),A(n,e.businessIdea,e.additionalContext||{}).catch(e=>{console.error("Caught error in async validation process:",e)})}).catch(e=>{console.error("Error initiating async process:",e)}),(0,a.revalidatePath)(`/validate/vc-report/${n}`),(0,a.revalidatePath)(`/validate/vc-report/${s}`),console.log(`Redirecting to VC report page - Form ID: ${s}, Validation ID: ${n}`),(0,o.redirect)(`/validate/vc-report/${n}`),{success:!0,formId:s,validationId:n}}catch(e){if(console.error("Error in submitVCValidationForm:",e),e instanceof Error&&e.message.includes("NEXT_REDIRECT"))throw e;return{success:!1,message:e instanceof Error?e.message:"Unknown error"}}}async function A(e,t,s){try{console.log("Starting async VC validation process for ID:",e),await c(e,"processing");let r=async(r,a)=>{if(a&&"vc_lead"!==r)try{let o="number"==typeof a.score?Math.round(a.score):"string"==typeof a.score?Math.round(parseFloat(a.score)):0,i=a.reasoning||"",n=await d(e,r,{businessIdea:t,...s},a,o,i,{});n.success?console.log(`Saved ${r} agent analysis to database`):console.error(`Error saving ${r} agent analysis:`,n.error)}catch(e){console.error(`Error processing ${r} agent analysis:`,e)}},a=async(e,t)=>{await r(e,t)},o=new Promise((e,t)=>{setTimeout(()=>t(Error("VC validation process timed out after 5 minutes")),3e5)}),i=g(t,s,a),n=await Promise.race([i,o]);if(!n.success){console.error("VC validation process failed:",n.error),console.error("Additional error details:",n.error_details||"No details available"),console.error("Failed at agent:",n.failed_at||"Unknown stage");let s=n.agent_analyses||{};if(Object.keys(s).length>0&&Object.keys(s).some(e=>null!==s[e])){console.log("Generating fallback report from partial agent analyses");let r=function(e,t){let s=Object.keys(t).filter(e=>null!==t[e]);console.log(`Generating fallback report from ${s.length} completed agents:`,s);let r=s.map(e=>{let s=t[e];return s&&"number"==typeof s.score?s.score:0}).filter(e=>e>0),a=r.length>0?Math.round(r.reduce((e,t)=>e+t,0)/r.length):60,o=[],i=[],n=[];s.forEach(e=>{let s=t[e];s&&(s.strengths&&Array.isArray(s.strengths)&&o.push(...s.strengths.slice(0,2)),s.weaknesses&&Array.isArray(s.weaknesses)&&i.push(...s.weaknesses.slice(0,2)),s.recommendations&&Array.isArray(s.recommendations)?n.push(...s.recommendations.slice(0,2)):s.suggested_actions&&Array.isArray(s.suggested_actions)&&n.push(...s.suggested_actions.slice(0,2)))});let l={};return t.problem&&(l.problem=t.problem.score||0),t.market&&(l.market=t.market.score||0),t.competitive&&(l.competition=t.competitive.score||0),t.business_model&&(l.business_model=t.business_model.score||0),t.uvp&&(l.unique_value=t.uvp.score||0),t.validation&&(l.validation=t.validation.score||0),{overall_score:a,business_type:"Startup",weighted_scores:{problem:.2,market:.2,competition:.15,business_model:.25,unique_value:.2},category_scores:l,recommendation:"This is a partial analysis based on the successfully completed portions of the validation process.",strengths:o.slice(0,5),weaknesses:i.slice(0,5),suggested_actions:[...n.slice(0,5),"Consider running a standard validation for more complete results"],idea_improvements:{original_idea:e,improved_idea:t.problem?.improved_problem_statement||e,problem_statement:t.problem?.problem_statement||"",market_positioning:t.market?.target_segment||"",uvp:t.uvp?.one_liner||"",business_model:t.business_model?.revenue_model||""},partial_analysis:!0,completed_agents:s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}(t,s);await u(e,r,60),await c(e,"completed_with_errors");return}await c(e,"failed");return}if(console.log("VC validation process completed successfully"),n.vc_report){await new Promise(e=>setTimeout(e,1e3));let t=n.vc_report.overall_score;await u(e,n.vc_report,t),await c(e,"completed"),console.log("VC validation report saved to database")}}catch(s){console.error("Error in processVCValidationAsync:",s);try{let r=s instanceof Error?{message:s.message,stack:s.stack,name:s.name}:{message:"Unknown error type"},a={overall_score:50,business_type:"Unspecified",weighted_scores:{},category_scores:{},recommendation:"The validation process encountered technical difficulties. We recommend trying again or using the standard validation option.",strengths:[],weaknesses:[],suggested_actions:["Try validating with the basic validator instead"],idea_improvements:{original_idea:t,improved_idea:t,problem_statement:"",market_positioning:"",uvp:"",business_model:""},diagnostics:{error:r,timestamp:new Date().toISOString()},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await u(e,a,50)}catch(e){console.error("Error creating fallback error report:",e)}await c(e,"failed")}}(0,s(33331).D)([S]),(0,r.A)(S,"404d2b0c08c7071d19f9f21954296181a94149a970",null)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,824,864,461,353,679,134],()=>s(93176));module.exports=r})();